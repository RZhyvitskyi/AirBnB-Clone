<header class="bg-primary">
  <nav class="navbar navbar-expand-lg">
    <div class="container">
      <div class="p-2">
        <h1><%= link_to "IIIKarnov Academy", root_path, class: "navbar-brand m-0 fs-4" %></h1>
      </div>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNavDropdown">
        <ul class="navbar-nav ms-auto">
          <li class="nav-item me-3">
            <% if @search %>
              <%= form_with url: search_path, method: :get, class: "d-flex align-items-center gap-2"  do |f| %>
                <%= f.text_field :name %>
                <%= f.submit "Search", class: "btn" %>
              <% end %>
            <% end %>
          </li>
          <li class="nav-item"><%= link_to "Home", home_path, class: "nav-link #{"active" if current_page?(home_path) || current_page?(root_path)}" %></li>
          <li class="nav-item"><%= link_to "My bookings", bookings_path, class: "nav-link #{"active" if current_page?(bookings_path)}" %></li>
          <li class="nav-item"><%= link_to "New booking", new_booking_path, class: "nav-link #{"active" if current_page?(new_booking_path)}" %></li>
          <li class="nav-item"><%= link_to "Demons", demons_path, class: "nav-link #{"active" if current_page?(demons_path)}" %></li>
          <li class="nav-item"><%= link_to "New demon", new_demon_path, class: "nav-link #{"active" if current_page?(new_demon_path)}" %></li>
          <% if (current_user && policy(User).index? ) %>
           <li class="nav-item"><%= link_to "Users", users_path, class: "nav-link #{"active" if current_page?(users_path)}" %></li>
          <% end %>
          <li class="nav-item"><%= link_to "About", about_path, class: "nav-link #{"active" if current_page?(about_path)}" %></li>
           <li class="nav-item">
            <% if user_signed_in? %>
              <%= link_to "Log out", destroy_user_session_path, method: :delete, class: "nav-link" %>
            <% else %>
              <%= link_to "Login", new_user_session_path, class: "nav-link" %>
            <% end %>
          </li>
        </ul>
      </div>
    </div>
  </nav>
</header>